<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; display: grid; place-items: center; min-height: 100vh; }
    form { background: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 20px; width: 400px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    div { margin-bottom: 15px; }
    label { display: block; font-weight: bold; margin-bottom: 5px; }
    input { width: 100%; padding: 8px; box-sizing: border-box; }
    button { width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 5px; font-size: 1rem; cursor: pointer; }
    h2 { text-align: center; margin-top: 0; }
    #response { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>

  <form id="product-form">
    <h2>Add New Product</h2>
    
    <div>
      <label for="name">Product Name:</label>
      <input type="text" id="name" value="Test Shoe">
    </div>
    <div>
      <label for="brand">Brand:</label>
      <input type="text" id="brand" value="Liberty">
    </div>
    <div>
  <label for="category">Category Key:</label>
  <input type="text" id="category" value="men-casual" placeholder="e.g., men-casual, women-sandals">
</div>
<div>
    <div>
      <label for="mrp">MRP (₹):</label>
      <input type="number" id="mrp" value="3000">
    </div>
    <div>
      <label for="salePrice">Sale Price (₹):</label>
      <input type="number" id="salePrice" value="2499">
    </div>
    <div>
      <label for="moq">MOQ:</label>
      <input type="number" id="moq" value="10">
    </div>
    <div>
      <label for="images">Image URL:</label>
      <input type="text" id="images" value="images/plp-shoe-1.jpg">
    </div>
    
    <button type="submit">Add Product to Database</button>
    
    <div id="response"></div> </form>

  <script>
    const form = document.getElementById('product-form');
    const responseDiv = document.getElementById('response');
    
    form.addEventListener('submit', (e) => {
      e.preventDefault(); // Page ko refresh hone se roko
      
      // 1. Form se saara data nikalo
      const productData = {
        name: document.getElementById('name').value,
        brand: document.getElementById('brand').value,
        category: document.getElementById('category').value,
        mrp: document.getElementById('mrp').value,
        salePrice: document.getElementById('salePrice').value,
        moq: document.getElementById('moq').value,
        images: [document.getElementById('images').value], // Image ko array me daala
        tags: ["New"] // Ek tag daal diya
      };

      responseDiv.innerText = 'Sending data...';
      
      // 2. Server ke API ko data bhejo (Fetch)
      fetch('/api/products', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json' // Server ko batao ki JSON bhej rahe hain
        },
        body: JSON.stringify(productData) // Data ko JSON string me badlo
      })
      .then(res => res.json())
      .then(data => {
        if(data.error) {
          responseDiv.innerText = `Error: ${data.error}`;
          responseDiv.style.color = 'red';
        } else {
          responseDiv.innerText = 'Success! Product added to MongoDB!';
          responseDiv.style.color = 'green';
          form.reset(); // Form khaali kar do
        }
      })
      .catch(err => {
        responseDiv.innerText = 'Server me error!';
        responseDiv.style.color = 'red';
      });
      
    });
  </script>

</body>
</html>