<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details - ShoeOn</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/product-detail.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

  <header class="main-header">
    <div class="nav-left">
      <a href="javascript:history.back()" class="nav-icon"><i class="fa-solid fa-arrow-left"></i></a>
    </div>
    <div class="nav-center" style="text-align:center; font-weight:bold;">
      Product Details
    </div>
    <div class="nav-right">
      <a href="#" class="nav-icon" id="cart-icon-btn"> 
        <i class="fa-solid fa-bag-shopping"></i>
        <span class="cart-count" id="cart-item-count">0</span>
      </a>
    </div>
  </header>

  <main class="pdp-container">
    
    <div class="slider-container">
      
      <div class="slider-icons">
        <button class="icon-btn"><i class="fa-solid fa-share-nodes"></i></button>
        <button class="icon-btn"><i class="fa-regular fa-heart"></i></button>
      </div>

      <div class="slider-track" id="productSlider">
        <div class="slide"><img src="images/shoe1.jpg" alt="Shoe Image 1"></div>
        <div class="slide"><img src="images/shoe2.jpg" alt="Shoe Image 2"></div>
        <div class="slide"><img src="images/shoe3.jpg" alt="Shoe Image 3"></div>
        <div class="slide"><img src="images/shoe4.jpg" alt="Shoe Image 4"></div>
      </div>

      <div class="slider-dots" id="sliderDots">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      
    </div>

    <div class="pdp-info">
      <h2 class="pdp-brand" id="pdp-brand">Liberty</h2>
      <h1 class="pdp-title" id="pdp-name">Men's Synthetic Leather Formal Shoes</h1>
      
      <div class="b2b-price-box">
        <div class="price-row">
          <span class="final-price" id="pdp-price">₹1,402</span>
         <span class="mrp">MRP: <del id="pdp-mrp-display">₹2,299</del></span>
        </div>
        <div class="margin-row">
          <span>Your Margin: <strong>₹897 (39%)</strong></span>
        </div>
        <div class="moq-row">
          <i class="fa-solid fa-box"></i> MOQ: <strong id="pdp-moq">...</strong> (1 Set)
        </div>
      </div>

      <div class="pdp-section">
        <h3>Size Availability (In One Set)</h3>
        
        <div class="size-set-info">
          <p class="set-note">
            <i class="fa-solid fa-circle-info"></i> 
            This item is sold in a Set. One Set contains mixed sizes:
          </p>
          
          <div class="static-size-row">
            <span class="static-size">6</span>
            <span class="static-size">7</span>
            <span class="static-size">8</span>
            <span class="static-size">9</span>
            <span class="static-size">10</span>
          </div>
        </div>
      </div>

      <div class="pdp-section">
    <h3>Product Details</h3>
    <ul class="pdp-specs" id="pdp-specs-list">
      </ul>
  </div>

    </div>
  </main>

  <div class="pdp-action-bar">
    <button class="btn-wishlist"><i class="fa-regular fa-heart"></i></button>
    <button class="btn-cart">Add to Cart</button>
    <button class="btn-buy">Buy Now</button>
  </div>

  <div class="overlay-modal" id="cart-overlay"></div>

<div class="cart-drawer" id="cart-drawer">
  
  <div class="cart-header">
    <h3>Your Cart</h3>
    <button classs="cart-close-btn" id="cart-close-btn">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  
  ...
  <div class="cart-content" id="cart-content-area"> <div class="cart-empty" id="cart-empty-msg">
      <i class="fa-solid fa-cart-shopping"></i>
      <p>Your cart is empty!</p>
    </div>
    
    <div class="items-list-container" id="cart-items-container">
      </div>
    
  </div>
  ...
  
  <div class="cart-footer">
    <div class="subtotal-row">
      <span>Subtotal:</span>
      <span class="subtotal-price" id="cart-subtotal">₹0.00</span>
    </div>
    <a href="checkout.html" class="btn-checkout">Proceed to Checkout</a>
  </div>
  
</div>

<div id="toast-popup">
  <i class="fa-solid fa-check-circle"></i>
  <span id="toast-message">Product added to cart!</span>
</div>

  <script>
    // 1. URL se data nikalo
    const params = new URLSearchParams(window.location.search);
    
    const brand = params.get('brand');
    const name = params.get('name');
    const price = params.get('price');
    const img = params.get('img');
    const moq = params.get('moq');

    // 2. Agar data hai, toh page update karo
    if (brand && name && price && img) {
      
      // Text Update (Safety check ke saath)
      const elBrand = document.getElementById('pdp-brand');
      const elName = document.getElementById('pdp-name');
      const elPrice = document.getElementById('pdp-price');
      const elMoq = document.getElementById('pdp-moq');

      if(elBrand) elBrand.innerText = brand;
      if(elName) elName.innerText = name;
      if(elPrice) elPrice.innerText = price;
      if(elMoq) elMoq.innerText = moq + " Pairs";
      
      // --- SLIDER IMAGES UPDATE ---
      // Error yahaan tha, ab humne fix kar diya.
      // Hum seedha slider ki images ko target kar rahe hain.
      const sliderImages = document.querySelectorAll('.slide img');
      
      if (sliderImages.length > 0) {
        sliderImages.forEach(sImg => {
          sImg.src = img; 
        });
      }
    }

    // 3. Slider Logic (Dots Change karna)
    const slider = document.getElementById('productSlider');
    const dots = document.querySelectorAll('.dot');

    if(slider) {
      slider.addEventListener('scroll', () => {
        const scrollPosition = slider.scrollLeft;
        const slideWidth = slider.clientWidth;
        
        // Math calculation to find active index
        const activeIndex = Math.round(scrollPosition / slideWidth);

        dots.forEach((dot, index) => {
          if (index === activeIndex) {
            dot.classList.add('active');
          } else {
            dot.classList.remove('active');
          }
        });
      });
    }
  </script>

<script src="js/global.js"></script>
  <script src="js/detail.js"></script>

</body>
</html>